http://lufylegend.com/lufylegend //HTML5开源引擎


###风格主题配置功能:   canvas mode: admin 更改背景颜色, 背景图片, 拖动, 缩放, 文字编辑, 图表编辑(实时监控开关, api), 新增, 删除图表

  ##主题列表页
    #新建风格类别
    #分类列表
    #主题复制(通用属性才允许复制?)
    #预览主题()
    #新建主题

  ##新增主题页面 (向导模式/专业模式)
    // 向导模式: 第一步 基本配置
    #主题唯一key: 自动生成
    #主题名称
    #主题简介
    // 向导模式: 第二步 属性配置
    #主题分类
    #主题属性: 通用|专属
    // 向导模式: 第三步 echarts配置
      - echarts主题配置: 配置项(json)
    // 完成


###场景配置:
      /*
      // 求最大公约数
      function gcd (a, b) {
        var r;
        while (b != 0) {
          r = a % b;
          a = b;
          b = r;
        }
        return a;
      }
      // 获取设备的 pixel ratio
      var getPixelRatio = function(context) {
          var backingStore = context.backingStorePixelRatio ||
              context.webkitBackingStorePixelRatio ||
              context.mozBackingStorePixelRatio ||
              context.msBackingStorePixelRatio ||
              context.oBackingStorePixelRatio ||
              context.backingStorePixelRatio || 1;
          return (window.devicePixelRatio || 1) / backingStore;
      };
      var ratio = getPixelRatio(ctx);
      */

    #tools
      保存场景
      更换主题
      自定义echart主题(json)
      场景(大屏)宽高比例(4:3/16:9/16:10/自定义[设置大屏宽x高])
      背景颜色: (颜色板/颜色滑块/纯色/渐变色/渐变方向/渐变颜色最多三组渐变
      背景图片:(要求为2倍尺寸) 居中/靠左/靠右/靠上/靠下
      echarts各类图表
      大屏数据模块
      排行榜模块
      流程节点(一期暂不支持)

  ##编辑主题页面
    [考虑到主题模板的套用如果在进行修改之后会影响到之前所有应用改主题的用户, 所以有2个方案.]
      1: 不允许修改;
      2: 每次可视化配置完之后,把当次主题的配置保存一份到可视化配置库, 这样就算之后修改了也不会影响到之前配置完的用户, 但这得建立在之前应用的主题用户不再进行修改的前提下.
    #保存
    #另存为

###可视化配置功能: canvas mode: 可拖拽, 缩放, 文字编辑, 不能新增, 删除
  ##只能选择应用已有风格主题



  ###背景:
    1, 数据平台繁多, 数据格式和规范风格迥异
    2, 数据平台展现方式单一, 各产品,业务线重复造轮子
    3, 众多产品和业务的数据展现有强烈的大屏实时展现的需求

  ###适合大屏实时展现的产品, 业务有:
    ##手百部门: 
      #产品
        直播类, feed, bug反馈, 评论, 新闻, 手百首屏点击区域热力图, 手百各落地页实时PV, UV上报
      #需求
        脚本监控, 任务进程, 网络状况, 服务器状态, 接口状态, PV, UV, 异常上报等有实时数据产出的业务,包括大屏可视化平台本身业务的实时监控
    ##其他部门
        百度外卖, 糯米, 搜索, 排名等有实时数据产出和有实时展现需求的产品业务

  ###难点:
     各产品业务产出的数据接口格式规范不统一, 提供的数据接口可用性不可控
     1, 数据实时性
     2, 格式迥异性
     3, 接入复杂性
     4, 接口失控性
     5, 场景多样性
     6, 服务稳定性

  ###解决方案:
    1, 大屏可视化平台使用node server, 对接入方主动远程拉取数据保存到缓存, 对内提供websocket服务实时推送数据
    2, 选用echarts图表展现组件, 借用echarts统一的数据格式的优势
    3, 接入简单易用, 只需统一为echarts数据格式, 填写数据接口即可
    4, 平台采用node server + redis缓存, 在外部接口不可用的情况下, 使用平台缓存数据做展现并通知到接口人
    5, led屏, 电视屏幕尺寸繁多, 接入方只需选择平台提供的风格主题即可, 其他的展现兼容问题由我们来搞定
    6, node server + nginx, 回滚机制, 应急处理

  ### 平台功能(管理侧)
  ### 权限设置


  ###风格主题配置功能:   canvas mode: admin

  ##主题列表页(瀑布墙/表格)
    #新建风格类别
    #分类列表
    #主题复制(通用属性才允许复制?)
    #预览主题()
    #新建主题

  ##新增主题页面 (向导模式/专业模式)
    #主题唯一key: 自动生成
    #主题名称
    #主题分类
    #主题属性: 通用|专属
    #主题简介
    #主题缩略图

###场景配置:
    #tools
      预览
      保存场景
      配置echart主题JSON, 可直接运行查看效果
      场景宽高比例(4:3/16:9/16:10/自定义[设置大屏宽x高]) ****一个主题下可以创建保存多个不同比例的场景******
      背景颜色: (颜色板/颜色滑块/纯色/渐变色/渐变方向/渐变颜色最多三组渐变
      背景图片:(要求为2倍尺寸) 居中/靠左/靠右/靠上/靠下
      echarts各类图表
      数据排行榜
      数据大版

      流程节点, 连线(一期暂不支持)
    #场景操作
      #拖拽
      #缩放
      #图表配置(更新频率: 0/1, [数据接口url/数据库/缓存接入ip, user,pwd,database,tables], 图表title设置, 自定义图表样式)
      #删除图表

###可视化配置(管理侧/用户侧)
  ## 设置数据延迟时间(为0则显示为实时数据)
  ## 选择风格主题
  ## 配置场景中各图表Title和数据接口url, 各图表可以自行微调
  ## 预览(该主题下已配置好的所有尺寸比例, 如果有特殊比例, 可自行创建)
  ## 
  

  2016.12.12 遗留bug
  canvas中删除node, echart之后控制面板上之前如果有添加背景图片没有同步移除;
  把控制面板数据对应到canvas中组件上?

